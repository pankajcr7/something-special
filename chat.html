<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>RizzGPT Chat â€” AI Reply Generator</title>
    <meta name="description" content="Build a chat conversation and let AI generate the perfect reply. Reads full context for natural, human-like responses.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="chat.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’œ</text></svg>">
    <meta name="theme-color" content="#0a0a0f">
</head>
<body>

    <nav class="chat-nav">
        <a href="index.html" class="nav-back">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </a>
        <div class="nav-title">
            <div class="nav-avatar" id="navAvatar">S</div>
            <div class="nav-info">
                <span class="nav-name" id="navName">Chat Simulator</span>
                <span class="nav-status">â— AI-powered replies</span>
            </div>
        </div>
        <button class="nav-btn" id="chatSwitcherBtn" title="Switch Chat">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        </button>
        <button class="nav-btn" id="settingsToggle" title="Settings">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 7a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0 7a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/></svg>
        </button>
    </nav>

    <!-- Vibe Meter -->
    <div class="vibe-meter" id="vibeMeter">
        <div class="vibe-meter-inner">
            <span class="vibe-label" id="vibeLabel">ğŸ¥¶ Cold</span>
            <div class="vibe-bar"><div class="vibe-fill" id="vibeFill" style="width:20%"></div></div>
            <span class="vibe-score" id="vibeScore">20</span>
        </div>
    </div>

    <!-- Conversation Goal Tracker -->
    <div class="goal-tracker" id="goalTracker" style="display:none">
        <div class="goal-tracker-inner">
            <span class="goal-icon">ğŸ¯</span>
            <span class="goal-text" id="goalText">No goal set</span>
            <div class="goal-progress-bar"><div class="goal-progress-fill" id="goalFill" style="width:0%"></div></div>
            <span class="goal-pct" id="goalPct">0%</span>
            <button class="goal-close-btn" id="closeGoal">âœ•</button>
        </div>
    </div>

    <!-- Sentiment Timeline -->
    <div class="sentiment-panel" id="sentimentPanel" style="display:none">
        <div class="sentiment-header">
            <span class="sentiment-title">ğŸ“Š Sentiment Timeline</span>
            <button class="sentiment-close" id="closeSentiment">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
        </div>
        <canvas id="sentimentCanvas" width="360" height="120"></canvas>
    </div>

    <!-- Multi-Chat Switcher -->
    <div class="chat-switcher-overlay" id="chatSwitcherOverlay" style="display:none">
        <div class="chat-switcher-modal">
            <div class="chat-switcher-header">
                <h3>ğŸ’¬ Your Chats</h3>
                <button class="chat-switcher-close" id="closeChatSwitcher">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
                </button>
            </div>
            <div class="chat-switcher-list" id="chatSwitcherList"></div>
            <button class="chat-switcher-new" id="newChatBtn">+ New Chat</button>
        </div>
    </div>

    <!-- Message Rewrite Popup -->
    <div class="rewrite-popup" id="rewritePopup" style="display:none">
        <div class="rewrite-popup-inner">
            <div class="rewrite-header">âœï¸ Rewrite Message</div>
            <div class="rewrite-original" id="rewriteOriginal"></div>
            <div class="rewrite-options" id="rewriteOptions"></div>
            <button class="rewrite-close-btn" id="closeRewrite">Cancel</button>
        </div>
    </div>

    <div class="settings-panel" id="settingsPanel">
        <div class="settings-inner">
            <div class="setting-group">
                <label>Their Name</label>
                <input type="text" id="theirName" placeholder="e.g., Sarah" maxlength="20">
            </div>
            <div class="setting-group">
                <label>Their Persona</label>
                <div class="style-chips">
                    <button class="persona-chip" data-persona="normal">ğŸ˜Š Normal</button>
                    <button class="persona-chip" data-persona="shy">ğŸ™ˆ Shy</button>
                    <button class="persona-chip" data-persona="confident">ğŸ’ª Confident</button>
                    <button class="persona-chip" data-persona="sarcastic">ğŸ˜ Sarcastic</button>
                    <button class="persona-chip" data-persona="dry">ğŸ«¤ Dry Texter</button>
                    <button class="persona-chip" data-persona="flirty">ğŸ˜˜ Flirty</button>
                    <button class="persona-chip" data-persona="hardtoget">ğŸ™… Hard to Get</button>
                    <button class="persona-chip" data-persona="clingy">ğŸ¥º Clingy</button>
                    <button class="persona-chip" data-persona="intellectual">ğŸ§  Intellectual</button>
                </div>
            </div>
            <div class="setting-group">
                <label>Conversation Goal</label>
                <div class="style-chips">
                    <button class="goal-chip" data-goal="none">âŒ None</button>
                    <button class="goal-chip" data-goal="getnumber">ğŸ“± Get Number</button>
                    <button class="goal-chip" data-goal="askout">ğŸ’• Ask Them Out</button>
                    <button class="goal-chip" data-goal="keepflirty">ğŸ”¥ Keep It Flirty</button>
                    <button class="goal-chip" data-goal="deepen">ğŸ’ Deepen Connection</button>
                    <button class="goal-chip" data-goal="friendzone">ğŸƒ Escape Friend Zone</button>
                </div>
            </div>
            <div class="setting-group">
                <label>Rizz Style</label>
                <div class="style-chips">
                    <button class="chip active" data-style="smooth">ğŸ˜ Smooth</button>
                    <button class="chip" data-style="funny">ğŸ˜‚ Funny</button>
                    <button class="chip" data-style="romantic">â¤ï¸ Romantic</button>
                    <button class="chip" data-style="bold">ğŸ”¥ Bold</button>
                    <button class="chip" data-style="savage">ğŸ’€ Savage</button>
                    <button class="chip" data-style="sweet">ğŸ¯ Sweet</button>
                    <button class="chip" data-style="spicy">ğŸŒ¶ï¸ Spicy</button>
                    <button class="chip" data-style="toxic">â˜ ï¸ Toxic</button>
                    <button class="chip" data-style="drunk">ğŸ· Drunk</button>
                    <button class="chip" data-style="villain">ğŸ–¤ Villain</button>
                    <button class="chip" data-style="desi">ğŸ‡®ğŸ‡³ Desi</button>
                    <button class="chip" data-style="flirtyaf">ğŸ˜ˆ Flirty AF</button>
                    <button class="chip" data-style="nerdy">ğŸ¤“ Nerdy</button>
                    <button class="chip" data-style="poetic">ğŸ­ Poetic</button>
                </div>
            </div>
            <div class="setting-group">
                <label>Language</label>
                <select id="chatLang">
                    <option value="hinglish" selected>Hinglish</option>
                    <option value="english">English</option>
                    <option value="hindi">Hindi</option>
                    <option value="spanish">Spanish</option>
                    <option value="french">French</option>
                    <option value="german">German</option>
                    <option value="italian">Italian</option>
                    <option value="portuguese">Portuguese</option>
                    <option value="japanese">Japanese</option>
                    <option value="korean">Korean</option>
                    <option value="arabic">Arabic</option>
                    <option value="russian">Russian</option>
                    <option value="turkish">Turkish</option>
                    <option value="thai">Thai</option>
                </select>
            </div>
            <div class="setting-row">
                <label>Intensity</label>
                <div class="intensity-pills">
                    <button class="pill" data-int="mild">Mild</button>
                    <button class="pill active" data-int="bold">Bold</button>
                    <button class="pill" data-int="extreme">Extreme</button>
                </div>
            </div>
            <div class="setting-row">
                <label>AI Autopilot</label>
                <div class="autopilot-toggle">
                    <button class="autopilot-btn" id="autopilotBtn">OFF</button>
                    <span class="autopilot-desc">AI plays "them" automatically</span>
                </div>
            </div>
            <div class="settings-actions">
                <button class="export-chat-btn" id="sentimentBtn">ğŸ“Š Sentiment Timeline</button>
                <button class="export-chat-btn" id="exportChat">ğŸ“¸ Export as Image</button>
                <button class="clear-chat-btn" id="clearChat">ğŸ—‘ï¸ Clear Chat</button>
            </div>
        </div>
    </div>

    <div class="power-tools-panel" id="powerToolsPanel" style="display:none;">
        <div class="pt-header">
            <span class="pt-title">âš¡ Power Tools</span>
            <button class="pt-close" id="closePowerTools">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
        </div>
        <div class="pt-body" id="ptBody">
            <div class="pt-grid" id="ptGrid">
                <button class="pt-card" data-tool="lineMixer"><span class="pt-card-icon">ğŸµ</span><span class="pt-card-name">Line Mixer</span><span class="pt-card-desc">Remix in different styles</span></button>
                <button class="pt-card" data-tool="responsePredictor"><span class="pt-card-icon">ğŸ”®</span><span class="pt-card-name">Response Predictor</span><span class="pt-card-desc">Predict their reply</span></button>
                <button class="pt-card" data-tool="toneTranslator"><span class="pt-card-icon">ğŸ”„</span><span class="pt-card-name">Tone Translator</span><span class="pt-card-desc">Rewrite in any tone</span></button>
                <button class="pt-card" data-tool="antiCringe"><span class="pt-card-icon">ğŸ˜¬</span><span class="pt-card-name">Anti-Cringe</span><span class="pt-card-desc">Cringe check before send</span></button>
                <button class="pt-card" data-tool="perspectiveFlip"><span class="pt-card-icon">ğŸª</span><span class="pt-card-name">Perspective Flip</span><span class="pt-card-desc">See their reaction</span></button>
                <button class="pt-card" data-tool="rizzRater"><span class="pt-card-icon">â­</span><span class="pt-card-name">Rizz Rater</span><span class="pt-card-desc">Rate your message</span></button>
                <button class="pt-card" data-tool="redFlag"><span class="pt-card-icon">ğŸš©</span><span class="pt-card-name">Red Flag Detector</span><span class="pt-card-desc">Spot red & green flags</span></button>
                <button class="pt-card" data-tool="ghostRecovery"><span class="pt-card-icon">ğŸ‘»</span><span class="pt-card-name">Ghost Recovery</span><span class="pt-card-desc">Comeback from ghosting</span></button>
                <button class="pt-card" data-tool="msgDecoder"><span class="pt-card-icon">ğŸ§ </span><span class="pt-card-name">Message Decoder</span><span class="pt-card-desc">Decode hidden meaning</span></button>
                <button class="pt-card" data-tool="saveConvo"><span class="pt-card-icon">ğŸ†˜</span><span class="pt-card-name">Save the Convo</span><span class="pt-card-desc">Recover awkward chats</span></button>
            </div>
            <div class="pt-tool-view" id="ptToolView" style="display:none;">
                <button class="pt-back" id="ptBack">â† Back to tools</button>
                <div class="pt-tool-header" id="ptToolHeader"></div>
                <div class="pt-tool-inputs" id="ptToolInputs"></div>
                <button class="pt-gen-btn" id="ptGenBtn">Generate</button>
                <div class="pt-tool-result" id="ptToolResult"></div>
            </div>
        </div>
    </div>

    <div class="coach-panel" id="coachPanel" style="display:none;">
        <div class="coach-header">
            <span class="coach-title">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 3a3 3 0 1 1-3 3 3 3 0 0 1 3-3zm5 12.5a8 8 0 0 1-10 0C7 16 7 14 12 14s5 2 5 3.5z"/></svg>
                Chat Coach
            </span>
            <button class="coach-close" id="closeCoach">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
        </div>
        <div class="coach-body" id="coachBody"></div>
    </div>

    <!-- Scenario Picker -->
    <div class="scenario-overlay" id="scenarioOverlay" style="display:none">
        <div class="scenario-modal">
            <div class="scenario-header">
                <h3>ğŸ­ Pick a Scenario</h3>
                <button class="scenario-close" id="closeScenario">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
                </button>
            </div>
            <p class="scenario-desc">Choose a conversation scenario and AI will set the context</p>
            <div class="scenario-grid" id="scenarioGrid"></div>
        </div>
    </div>

    <input type="file" id="ssUploadInput" accept="image/*" style="display:none">

    <div class="ss-panel" id="ssPanel" style="display:none;">
        <div class="ss-panel-header">
            <span class="ss-panel-title">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                Import from Screenshot
            </span>
            <button class="ss-panel-close" id="closeSS">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
            </button>
        </div>
        <div class="ss-panel-body" id="ssPanelBody"></div>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="chat-messages" id="chatMessages">
            <div class="chat-date">Today</div>
            <div class="chat-hint">
                <p>Build a conversation, then let AI generate the perfect reply âš¡</p>
                <div class="hint-examples">
                    <button class="hint-btn" data-sender="them" data-text="heyy whats up">+ "heyy whats up"</button>
                    <button class="hint-btn" data-sender="them" data-text="you're kinda cute ngl">+ "you're kinda cute ngl"</button>
                    <button class="hint-btn" data-sender="them" data-text="wanna hang out sometime?">+ "wanna hang out sometime?"</button>
                </div>
                <div class="hint-divider"><span>or</span></div>
                <button class="scenario-trigger-btn" id="scenarioBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 3a2.83 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>
                    Pick a Scenario
                    <span class="upload-ss-sub">Pre-built conversation starters</span>
                </button>
                <div class="hint-divider"><span>or</span></div>
                <button class="upload-ss-btn" id="uploadSSHint" title="Upload chat screenshot">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                    Upload Chat Screenshot
                    <span class="upload-ss-sub">AI reads your chat & suggests replies</span>
                </button>
            </div>
        </div>

        <div class="ai-replies-panel" id="aiReplies" style="display:none;">
            <div class="ai-replies-header">
                <span class="ai-replies-title">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    Pick a reply
                </span>
                <button class="ai-replies-close" id="closeReplies">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>
                </button>
            </div>
            <div class="ai-replies-list" id="aiRepliesList"></div>
            <button class="ai-regen-btn" id="regenBtn">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6"/><path d="M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
                Regenerate
            </button>
        </div>
    </div>

    <div class="chat-input-area">
        <div class="sender-toggle">
            <button class="sender-btn active" data-sender="them" id="senderThem">
                <span class="sender-dot them-dot"></span>
                Their msg
            </button>
            <button class="sender-btn" data-sender="me" id="senderMe">
                <span class="sender-dot me-dot"></span>
                My msg
            </button>
        </div>
        <div class="input-row">
            <div class="input-text-wrap">
                <textarea class="chat-textarea" id="msgInput" placeholder="Type their message..." rows="1" maxlength="500"></textarea>
                <button class="input-send-btn" id="sendBtn" title="Send">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                </button>
            </div>
            <div class="input-actions">
                <button class="ss-btn" id="ssBtn" title="Upload Screenshot">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                </button>
                <button class="quick-reply-btn" id="quickReplyBtn" title="Quick Replies">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>
                </button>
                <button class="timing-btn" id="timingBtn" title="Reply Timing">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                </button>
                <button class="coach-btn" id="coachBtn" title="Chat Coach">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 3a3 3 0 1 1-3 3 3 3 0 0 1 3-3zm5 12.5a8 8 0 0 1-10 0C7 16 7 14 12 14s5 2 5 3.5z"/></svg>
                </button>
                <button class="ai-btn" id="aiBtn" title="Generate AI reply">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                </button>
                <button class="power-tools-btn" id="powerToolsBtn" title="Power Tools">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M20 6L9 17l-5-5"/></svg>
        <span id="toastText">Copied!</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script src="chat.js"></script>
</body>
</html>
